"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8375],{8375:(L,d,i)=>{i.r(d),i.d(d,{LocationMapPageModule:()=>M});var g=i(6895),m=i(4719),e=i(7609),u=i(9391),r=i(5861),l=i(8407),t=i(6738),p=i(6281);const h=[{path:"",component:(()=>{class n{constructor(o,a,s){this.geolocation=o,this.loadingCtrl=a,this.alertCtrl=s,this.marker=[],this.icon={icon:l.icon({iconSize:[25,41],iconAnchor:[13,40],iconUrl:"assets/img/map_markers/marker-icon.png",shadowUrl:"assets/img/map_markers/marker-shadow.png"})},this.coords=[],this.loading=this.loadingCtrl.create()}ngOnInit(){this.map=new l.Map("map"),l.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"ovnisolutions.com"}).addTo(this.map),this.map.on("click",o=>{this.addLocation(o)})}ionViewDidEnter(){this.locate()}locate(){var o=this;return(0,r.Z)(function*(){(yield o.loading).present();const a=yield(yield o.geolocation.getCurrentPosition()).coords;o.map.setView([a.latitude,a.longitude],17),(yield o.loading).dismiss()})()}addMyLocation(){var o=this;return(0,r.Z)(function*(){const a=yield(yield o.geolocation.getCurrentPosition()).coords;o.coords={lat:a.latitude,long:a.longitude},o.map.removeLayer(o.marker),o.marker=l.marker([a.latitude,a.longitude],o.icon).addTo(o.map),o.map.setView([a.latitude,a.longitude],17)})()}addLocation(o){var a=this;return(0,r.Z)(function*(){a.coords=o.latlng,a.map.removeLayer(a.marker),a.marker=l.marker([o.latlng.lat,o.latlng.lng],a.icon).addTo(a.map)})()}confirm(){var o=this;return(0,r.Z)(function*(){console.log(o.coords),o.alertMsg(!!o.coords.lat)})()}alertMsg(o){var a=this;return(0,r.Z)(function*(){const s=yield a.alertCtrl.create({header:"Debe seleccionar algun sitio para su pedido",buttons:["Aceptar"]}),v=yield a.alertCtrl.create({header:"\xbfEst\xe1 seguro de seleccionar esta direcci\xf3n?",buttons:[{text:"Aceptar",role:"confirm",handler:(y=(0,r.Z)(function*(){console.log("guardado")}),function(){return y.apply(this,arguments)})},{text:"Cancelar",role:"cancel"}]});var y;o?v.present():s.present()})()}ngOnDestroy(){this.map.remove(),console.log("mapa cerrado")}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p.b),t.Y36(e.HT),t.Y36(e.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-location-map"]],decls:14,vars:0,consts:[["color","custom"],["slot","start"],["vertical","bottom","horizontal","start","slot","fixed",3,"click"],["name","person-outline"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["name","checkmark"],["id","map",2,"width","100%","height","100%"]],template:function(o,a){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"locationMap"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-fab",2),t.NdJ("click",function(){return a.addMyLocation()}),t.TgZ(8,"ion-fab-button"),t._UZ(9,"ion-icon",3),t.qZA()(),t.TgZ(10,"ion-fab",4),t.NdJ("click",function(){return a.confirm()}),t.TgZ(11,"ion-fab-button"),t._UZ(12,"ion-icon",5),t.qZA()(),t._UZ(13,"div",6),t.qZA())},dependencies:[e.Sm,e.W2,e.IJ,e.W4,e.Gu,e.gu,e.fG,e.sr,e.wd]}),n})()}];let f=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(h),u.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,m.u5,e.Pc,f]}),n})()}}]);
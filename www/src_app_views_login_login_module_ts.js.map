{"version":3,"file":"src_app_views_login_login_module_ts.js","mappings":"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","sources":["./src/app/views/login/login-routing.module.ts","./src/app/views/login/login.module.ts","./src/app/views/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule, ReactiveFormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController, LoadingController, MenuController } from '@ionic/angular';\nimport { AuthService } from 'src/app/services/authService/auth.service';\nimport { Platform } from '@ionic/angular';\n// prueba\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\n\nexport class LoginPage implements OnInit {\n\n  form: FormGroup = this.formBuilder.group({\n    email: new FormControl('user', [Validators.required, Validators.minLength(4)]),\n    password: new FormControl('123456', [Validators.required, Validators.minLength(4)]),\n  });;\n\n  private loading = this.loadCtrlr.create();\n\n  constructor(\n    private tokenService: AuthService,\n    private router: Router,\n    private menu: MenuController,\n    private alert: AlertController,\n    private loadCtrlr: LoadingController,\n    private platform: Platform,\n    public formBuilder: FormBuilder\n    ) {\n      this.platform.backButton.subscribeWithPriority(10, () => {\n        console.log('Handler was called!');\n      });\n    }\n\n\n    ngOnInit() {\n    }\n\n    async overrideHardwareBackAction($event: any) {\n      await void(0); // Do nothing\n    }\n\n  async ingresar() {\n    const data = {\n      email: this.form.get('email')?.value,\n      password: this.form.get('password')?.value\n    };\n    if (!this.form.invalid) {\n      (await this.loading).present();\n      const info = await this.tokenService.loguearse(data)\n        .subscribe(async (res: any) => {\n          if(res.users) {\n            const users = res.users;\n            const usuario = users.find(\n              (item: any) => ((item.user === data.email || item.email === data.email) && item.password === data.password)\n            );\n            if(usuario) {\n              this.menu.enable(true);\n              (await this.loading).dismiss();\n              localStorage.setItem('token',usuario.token);\n              localStorage.setItem('name',usuario.Usuario);\n              localStorage.setItem('lastnames',usuario.lastnames);\n              await this.router.navigate(['/home']);\n            } else {\n              this.alertMessage('Por favor verifique sus datos de usuario.');\n            }\n          } else {\n            this.alertMessage('Error al traer informaci√≥n del servidor');\n          }\n        });\n    }\n  }\n\n  async alertMessage(msg: string) {\n    const alert = await this.alert.create({\n      header: 'ERROR AL INGRESAR',\n      message: msg+'.',\n      buttons: ['Aceptar']\n    });\n    await alert.present();\n  }\n\n\n  ionViewDidEnter(): void {\n    this.menu.enable(false);\n   }\n\n  // ionViewDidLeave(): void {\n  //   this.menu.enable(true);\n  // }\n\n}\n"],"names":["Component","Router","AlertController","LoadingController","MenuController","AuthService","Platform","FormBuilder","Validators","FormControl","LoginPage","constructor","tokenService","router","menu","alert","loadCtrlr","platform","formBuilder","group","email","required","minLength","password","create","backButton","subscribeWithPriority","console","log","ngOnInit","overrideHardwareBackAction","$event","ingresar","data","form","get","value","invalid","loading","present","info","loguearse","subscribe","res","users","usuario","find","item","user","enable","dismiss","localStorage","setItem","token","Usuario","lastnames","navigate","alertMessage","msg","header","message","buttons","ionViewDidEnter","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}